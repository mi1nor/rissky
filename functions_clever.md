`1. Введение`
С помощью платформы Клевер, вы можете написать практически все что хотите, конечно же, в рамках разумного. Вы можете написать полностью свой код, который будет сочетаться с автономным полетом и под ваши задачи, которые вы хотите сделать, то он скорее всего будет работать так, как вы и задумывали.
Если же вы хотите внести какой-то вклад или придумать что-то новое, то вы можете сделать свой проект. В этом курсе будет модуль рой, который полностью относится как проект. То есть, разработчики Клевера его не разрабатывали, а только лишь сами пользователи.
В этом уроке мы разберем самые базовые и нужные функции Клевера, которые могут вам помочь при написании кода для автономного полета.

`2. Получения значения с топиков`
У нашего дрона Клевера есть куча разных топиков. Дрон передает значения и публикует их в топик. Условно, у нас есть лазерный дальномер и он у нас подключен. Все значения, включая высота и даже сколько он уже работает: публикоуются в топик. Сейчас мы и узнаем, как получить значения с топика, вы сможете получать значения с любого топика которого захотите.

С помощью этих значений, вы можете их включить в ваш код для автономного полета, которые могут вам помочь. Допустим, на поле есть платформа и нам нужно узнать, где она находится. Эта платформа с высотой 0.5 метра. Когда наш дрон летает, то мы можем сделать, если условно высота ниже 1 метра, то он узнает, что тут платформа. Но получения высоты с телеметрии нам тут не поможет, ибо будет писать нашу высоту 1.5 метр, когда дальномер 1 и ниже, ибо сама платформа 0.5 метра. Это одно из применений значения из топика.

В самом последнем образе вы можете смотреть все топики, перейдя во вкладку "View topics" зайдя перед этим в браузер и открыв специальную ссылку. Здесь вы увидете все топики, где наш Клевер передает значения. Давайте же перейдем в топик "/rangefinder/range". Это наш дальномер.

<img>

Так же вы можете узнать значения и в самом терминале, это можно сделать через команду "rostopic echo /rangefinder/range".

Здесь вы видите, как публикуются разные значения. Самый нужный из этих является "range", или же высота, все остальные нам не понадобятся. Если же вы хотите узнать в терминале только "range", то есть высоту, то вам придется уже написать "rostopic echo /rangefinder/range/range".

<img>

Давайте же теперь напишем код, который будет брать эти значения из топиков.

Нам нужно будет написать код, где будет браться подписка на наш топик, который нужен и брать с него значения. Но чтобы взять подписку и получить значения, нужно подключить библиотеки. Это можно легко сделать. Вы должны открыть сам топик, и рядом с его названием будет по типу "sensor_msgs/Range". вы должны будете написать "from sensor_msgs.msg import Range", и так вы должны будете сделать со всеми топиками, просто поставить свои значения.

```
from sensor_msgs.msg import Range # Вставляем где библиотеки

z_dist = 0 # Иницилизируем
def range_callback(msg): # Делаем функцию, где msg будет брать "команды", то есть range
    global z_dist # Делаем ее глобальной чтобы потом куда-то можно было вставить
    z_dist = msg.range # Берет значение

rospy.Subscriber('rangefinder/range', Range, range_callback) # Берем значение из топика
```

Потом, с этим кодом вы можете делать что хотите. z_dist будет постоянно обновляться и брать нынешнею высоту. Если же вы хотите взять условно сколько секунд уже прошло, то надо будет написать так, эти значения вы можете увидеть в топике:

```
    z_dist = msg.header.stamp.secs # вместо z_dist = msg.range
```

Чтобы вывести нынешнею высоту, вы можете просто добавить это в функцию main() и сделать так:

```
print("Z = {}".format(z_dist))
```